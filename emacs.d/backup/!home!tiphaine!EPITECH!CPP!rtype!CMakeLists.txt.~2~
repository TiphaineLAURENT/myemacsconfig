cmake_minimum_required(VERSION 3.9)
project(rtype)


# Project setup
set(CMAKE_CXX_STANDARD 17)
set(EXECUTABLE_OUTPUT_PATH ${CMAKE_SOURCE_DIR}/bin)


include(${CMAKE_SOURCE_DIR}/build/conanbuildinfo.cmake)
conan_basic_setup()


# rtype client executable
set(CLIENT_SOURCE_DIR "src/client")
set(CLIENT_SOURCE_FILES ${CLIENT_SOURCE_DIR}/main.cpp
  )
find_package(Qt5 COMPONENTS Core Gui Widgets DBus Network REQUIRED)
add_executable(rtype_client ${CLIENT_SOURCE_FILES})
set_target_properties(rtype_client PROPERTIES LINKER_LANGUAGE CXX)
target_include_directories(rtype_client PRIVATE
  ${BOPUS_SOURCE_DIR}
  ${BPORTAUDIO_SOURCE_DIR}
  )
target_link_libraries(rtype_client
  )


# rtype server executable
set(SERVER_SOURCE_DIR "src/server")
set(SERVER_SOURCE_FILES ${SERVER_SOURCE_DIR}/main.cpp
  )
add_executable(rtype_server ${SERVER_SOURCE_FILES})
set_target_properties(rtype_server PROPERTIES LINKER_LANGUAGE CXX)
target_include_directories(rtype_server PRIVATE
  ${BOPUS_SOURCE_DIR}
  ${BPORTAUDIO_SOURCE_DIR}
  )
target_link_libraries(rtype_server
  )


# Installation setup
install(TARGETS rtype_client rtype_server
  RUNTIME DESTINATION bin
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib/static
  )
