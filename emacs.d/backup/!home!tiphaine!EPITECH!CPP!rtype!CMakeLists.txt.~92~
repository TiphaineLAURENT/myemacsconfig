cmake_minimum_required(VERSION 3.9)
project(rtype)


# Project setup
set(CMAKE_CXX_STANDARD 17)
set(EXECUTABLE_OUTPUT_PATH ${CMAKE_SOURCE_DIR}/bin)
include(${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)
conan_basic_setup(TARGETS)
#include(${CMAKE_BINARY_DIR}/conan_paths.cmake)

set(sfml_LIBRARIES "sfml-graphics" "sfml-window" "sfml-audio" "sfml-network" "sfml-system")


# rtype client executable
set(CLIENT_SOURCE_DIR "src/client")
set(CLIENT_SOURCE_FILES ${CLIENT_SOURCE_DIR}/main.cpp
  )
add_executable(rtype_client ${CLIENT_SOURCE_FILES})
set_target_properties(rtype_client PROPERTIES LINKER_LANGUAGE CXX)
target_include_directories(rtype_client PRIVATE
  )
target_link_libraries(rtype_client
  ${sfml_LIBRARIES}
  )


# find_package(boost_asio 1.66 REQUIRED)

# rtype server executable
set(SERVER_SOURCE_DIR "src/server")
set(SERVER_SOURCE_FILES ${SERVER_SOURCE_DIR}/main.cpp
  ${SERVER_SOURCE_DIR}/Server.cpp ${SERVER_SOURCE_DIR}/Server.hpp
  ${SERVER_SOURCE_DIR}/Message.hpp
  )
add_executable(rtype_server ${SERVER_SOURCE_FILES})
set_target_properties(rtype_server PROPERTIES LINKER_LANGUAGE CXX)
# target_include_directories(rtype_server PRIVATE
#   ${boostasio_INCLUDES}
#   )
target_link_libraries(rtype_server
  CONAN_PKG::Boost_asio
  )


# Installation setup
install(TARGETS rtype_client rtype_server
  RUNTIME DESTINATION bin
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib/static
  )
